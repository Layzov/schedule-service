
# Запуск проекта

Короткая инструкция для первого запуска проекта на локальной машине.

1) Установите `make`, если он не установлен (нужен для удобного запуска Makefile).

2) Из корня репозитория выполните одну команду — всё поднимется и запустится автоматически:

```powershell
make start-local
```

Эта команда выполнит: загрузку/обновление модулей (`go mod download` / `go mod tidy`), поднятие `docker-compose`, применение SQL-миграций и сборку + запуск локального бинаря.

3) После первого успешного запуска, когда база данных поднята и миграции применены, для повторного запуска приложения используйте:

```powershell
make run
```

4) Все остальные доступные команды можно посмотреть в подсказке:

```powershell
make help
```

---


## Полезные команды

- `make start` — поднять сервисы и применить миграции
- `make migrate-all` — поднять Postgres и применить все SQL-миграции внутри контейнера
- `make build` — собрать бинарь в `bin/`
- `make run` — собрать и запустить локально
- `make compose-up` / `make compose-down` — поднять/остановить docker-compose
- `make clean` — удалить `bin/`

---

## Принятые решения по реализации

В процессе разработки были приняты некоторые архитектурные и практические решения, не описанные в API, которые упростили реализацию и поддержку:

1. Централизованная обработка ошибок
  - Добавлены более информативные ошибки 400 (включая случаи валидации, например `{} is empty`) и 500 (internal server error). Это упрощает отладку и стабильность при внесении данных.

2. Отдельные DTO для API
  - Для удобства и разделения слоёв добавлены дополнительные DTO-модели — сервисный слой работает с доменной моделью, а хэндлеры маппят её в API-DTO. Это уменьшает количество лишних полей, передаваемых между слоями.

3. Улучшенные логи
  - Подключён `slogpretty` (в `pkg/handlers/slogPretty`) для удобочитаемого логирования в процессе разработки.

4. Graceful shutdown
  - Реализована корректная остановка сервиса, чтобы завершить активные запросы и освободить ресурсы корректно.

5. Транзакции
  - Операции, затрагивающие несколько таблиц / сущностей, выполняются в рамках транзакций для сохранения консистентности данных.
